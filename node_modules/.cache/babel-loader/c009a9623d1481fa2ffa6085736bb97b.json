{"ast":null,"code":"\"use strict\";\n\nvar utils = require(\"./utils\");\n\nfunction transformRequest(data) {\n  if (utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data)) {\n    return data;\n  } // Object and Array: returns a deep copy\n\n\n  if (utils.isObjectOrArray(data)) {\n    return JSON.parse(JSON.stringify(data));\n  } // for primitives like string, undefined, null, number\n\n\n  return data;\n}\n\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: transformRequest(result[1]),\n    headers: result[2],\n    config: config,\n    request: {\n      responseURL: config.url\n    }\n  };\n}\n\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url || \"\"; // TODO we're not hitting this `if` in any of the tests, investigate\n\n  if (config.baseURL && url.substr(0, config.baseURL.length) === config.baseURL) {\n    url = url.slice(config.baseURL.length);\n  }\n\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n  var handler = utils.findHandler(mockAdapter.handlers, config.method, url, config.data, config.params, config.headers, config.baseURL);\n\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== \"function\") {\n      utils.settle(resolve, reject, makeResponse(handler.slice(3), config), mockAdapter.delayResponse);\n    } else {\n      var result = handler[3](config); // TODO throw a sane exception when return value is incorrect\n\n      if (typeof result.then !== \"function\") {\n        utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n      } else {\n        result.then(function (result) {\n          if (result.config && result.status) {\n            utils.settle(resolve, reject, makeResponse([result.status, result.data, result.headers], result.config), 0);\n          } else {\n            utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n          }\n        }, function (error) {\n          if (mockAdapter.delayResponse > 0) {\n            setTimeout(function () {\n              reject(error);\n            }, mockAdapter.delayResponse);\n          } else {\n            reject(error);\n          }\n        });\n      }\n    }\n  } else {\n    // handler not found\n    switch (mockAdapter.onNoMatch) {\n      case \"passthrough\":\n        mockAdapter.originalAdapter(config).then(resolve, reject);\n        break;\n\n      case \"throwException\":\n        throw utils.createCouldNotFindMockError(config);\n\n      default:\n        utils.settle(resolve, reject, {\n          status: 404,\n          config: config\n        }, mockAdapter.delayResponse);\n    }\n  }\n}\n\nmodule.exports = handleRequest;","map":{"version":3,"sources":["D:/workspace/flyingcarpet/flyingcarpet-shared-inbox/node_modules/axios-mock-adapter/src/handle_request.js"],"names":["utils","require","transformRequest","data","isArrayBuffer","isBuffer","isStream","isObjectOrArray","JSON","parse","stringify","makeResponse","result","config","status","headers","request","responseURL","url","handleRequest","mockAdapter","resolve","reject","baseURL","substr","length","slice","adapter","history","method","push","handler","findHandler","handlers","params","purgeIfReplyOnce","originalAdapter","then","settle","delayResponse","error","setTimeout","onNoMatch","createCouldNotFindMockError","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar utils = require(\"./utils\");\n\nfunction transformRequest(data) {\n  if (\n    utils.isArrayBuffer(data) ||\n    utils.isBuffer(data) ||\n    utils.isStream(data)\n  ) {\n    return data;\n  }\n\n  // Object and Array: returns a deep copy\n  if (utils.isObjectOrArray(data)) {\n    return JSON.parse(JSON.stringify(data));\n  }\n\n  // for primitives like string, undefined, null, number\n  return data;\n}\n\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: transformRequest(result[1]),\n    headers: result[2],\n    config: config,\n    request: {\n      responseURL: config.url,\n    },\n  };\n}\n\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url || \"\";\n  // TODO we're not hitting this `if` in any of the tests, investigate\n  if (\n    config.baseURL &&\n    url.substr(0, config.baseURL.length) === config.baseURL\n  ) {\n    url = url.slice(config.baseURL.length);\n  }\n\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n\n  var handler = utils.findHandler(\n    mockAdapter.handlers,\n    config.method,\n    url,\n    config.data,\n    config.params,\n    config.headers,\n    config.baseURL\n  );\n\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== \"function\") {\n      utils.settle(\n        resolve,\n        reject,\n        makeResponse(handler.slice(3), config),\n        mockAdapter.delayResponse\n      );\n    } else {\n      var result = handler[3](config);\n      // TODO throw a sane exception when return value is incorrect\n      if (typeof result.then !== \"function\") {\n        utils.settle(\n          resolve,\n          reject,\n          makeResponse(result, config),\n          mockAdapter.delayResponse\n        );\n      } else {\n        result.then(\n          function (result) {\n            if (result.config && result.status) {\n              utils.settle(\n                resolve,\n                reject,\n                makeResponse(\n                  [result.status, result.data, result.headers],\n                  result.config\n                ),\n                0\n              );\n            } else {\n              utils.settle(\n                resolve,\n                reject,\n                makeResponse(result, config),\n                mockAdapter.delayResponse\n              );\n            }\n          },\n          function (error) {\n            if (mockAdapter.delayResponse > 0) {\n              setTimeout(function () {\n                reject(error);\n              }, mockAdapter.delayResponse);\n            } else {\n              reject(error);\n            }\n          }\n        );\n      }\n    }\n  } else {\n    // handler not found\n    switch (mockAdapter.onNoMatch) {\n      case \"passthrough\":\n        mockAdapter.originalAdapter(config).then(resolve, reject);\n        break;\n      case \"throwException\":\n        throw utils.createCouldNotFindMockError(config);\n      default:\n        utils.settle(\n          resolve,\n          reject,\n          {\n            status: 404,\n            config: config,\n          },\n          mockAdapter.delayResponse\n        );\n    }\n  }\n}\n\nmodule.exports = handleRequest;\n"]},"metadata":{},"sourceType":"script"}